package edu.ucla.cs.cve.analysis;

import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.stream.JsonReader;

public class ReadNJRData {
	public static void main(String[] args) {
		String jsonFile = "/media/troy/Disk2/ONR/NJR/project-processed.json";
		try(JsonReader jsonReader = new JsonReader(new InputStreamReader(new FileInputStream(jsonFile), "UTF-8"))) {
		    Gson gson = new GsonBuilder().create();
		    jsonReader.beginArray();
		    while (jsonReader.hasNext()) {
		    	ProjectModel prjEntry = gson.fromJson(jsonReader, ProjectModel.class);
		    	System.out.println(prjEntry.path);
		    	for(ClassModel cls : prjEntry.lib) {
		    		System.out.println(cls.name);
		    	}
		    }
		    jsonReader.endArray();
		} catch (UnsupportedEncodingException e) {
		    e.printStackTrace();
		} catch (FileNotFoundException e) {
		    e.printStackTrace();
		} catch (IOException e) {
		    e.printStackTrace();
		}
	}
}

class ProjectModel {
	String path;
	ClassModel[] app;
	ClassModel[] lib;
}

class ClassModel {
	String name;
	String sha256;
	String size;
	String superClass;
	String[] inferfaces;
	String[] fields;
	String[] methods;
}
